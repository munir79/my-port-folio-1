;/*FB_PKG_DELIM*/

__d("useStoriesLWR_animations.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[{defaultValue:"www",kind:"LocalArgument",name:"variant"}],kind:"Fragment",metadata:null,name:"useStoriesLWR_animations",selections:[{args:[{kind:"Variable",name:"variant",variableName:"variant"}],kind:"FragmentSpread",name:"useStoriesLWRKeyframes_viewer"}],type:"Viewer",abstractKey:null};e.exports=a}),null);
__d("useStoriesSendReplyMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4826141330837571"}),null);
__d("useStoriesSendReplyMutation.graphql",["useStoriesSendReplyMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{kind:"Variable",name:"data",variableName:"input"}],d={alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useStoriesSendReplyMutation",selections:[{alias:null,args:c,concreteType:"DirectMessageReplyResponsePayload",kind:"LinkedField",name:"direct_message_reply",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"StoriesCardReactionSent_cardInfo"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useStoriesSendReplyMutation",selections:[{alias:null,args:c,concreteType:"DirectMessageReplyResponsePayload",kind:"LinkedField",name:"direct_message_reply",plural:!1,selections:[d,{alias:null,args:null,concreteType:"Story",kind:"LinkedField",name:"story",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryCardStoryInfo",kind:"LinkedField",name:"story_card_info",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"first",value:10}],concreteType:"StoryCardReactionsConnection",kind:"LinkedField",name:"story_card_reactions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryCardReactionsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerMontageMessageReaction",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"messaging_actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e],storageKey:null},{alias:null,args:null,concreteType:"MessengerMontageMessageActionsOfReactionConnection",kind:"LinkedField",name:"messaging_actions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"count",storageKey:null}],storageKey:null},{alias:"last5",args:[{kind:"Literal",name:"last",value:5}],concreteType:"MessengerMontageMessageActionsOfReactionConnection",kind:"LinkedField",name:"messaging_actions",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerMontageMessageActionsOfReactionEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerMontageMessageAction",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"reaction",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:"messaging_actions(last:5)"},e],storageKey:null}],storageKey:null}],storageKey:"story_card_reactions(first:10)"}],storageKey:null},e],storageKey:null}],storageKey:null}]},params:{id:b("useStoriesSendReplyMutation_facebookRelayOperation"),metadata:{},name:"useStoriesSendReplyMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("StoriesCreateContext",["react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=!1;c=a.createContext(b);g["default"]=c}),98);
__d("StoriesCreateConstants",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={DEFAULT:{BODY:h._("__JHASH__2dP-S2NXGWo__JHASH__"),CANCEL:h._("__JHASH__iNbID4Of76-__JHASH__"),CONFIRM:h._("__JHASH__2bGTq0Hn_zL__JHASH__"),TITLE:h._("__JHASH__fy6v2Hc0_3x__JHASH__")}};b={SELECTION_TILE_HEIGHT:330,SELECTION_TILE_WIDTH:220,SPACE_BETWEEN_SELECTOR:20};c={FOOTER_HEIGHT:52,HEADER_HEIGHT:16};d={COMET_PUSH_VIEW_HEIGHT:28,CONTAINER_HORIZONTAL_PADDING:24*2,CONTAINER_MAX_WIDTH:940,CONTAINER_VERTICAL_PADDING:32*2,CONTENT_HEADER_HEIGHT:36,CONTENT_HORIZONTAL_PADDING:16*2,CONTENT_VERTICAL_PADDING:16*2,MAX_OVERLAY_WIDTH:472.5,SIDE_PANE_WIDTH:360};e=h._("__JHASH__b-5wJWOv0zU__JHASH__");f={FOOTER_HEIGHT:12,HEADER_HEIGHT:12};h={EDITING:"editing",NONE:"none"};var i={EMOJI:"emoji",LOCATION:"location",POLL:"poll",TAG:"tag"},j={EDITING:"editing",NONE:"none"},k={HORIZONTAL:"horizontal",NONE:"none"},l=26,m=3,n=4,o={FOOTER_HEIGHT:92},p=Object.freeze({BLACK:"rgb(0, 0, 0)",BLUE:"rgb(41, 134, 174)",BROWN:"rgb(112, 41, 41)",CORAL:"rgb(247, 114, 74)",CYAN:"rgb(94, 213, 255)",GOLD:"rgb(241, 196, 58)",GRAY:"rgb(142, 147, 156)",GREEN:"rgb(136, 191, 75)",LIGHT_BLUE:"rgb(202, 237, 248)",LIGHT_GRAY:"rgb(206, 208, 212)",LIGHT_PURPLE:"rgb(220, 211, 239)",MAGENTA:"rgb(251, 62, 160)",MINT:"rgb(185, 252, 203)",NAVY:"rgb(43, 69, 124)",ORANGE:"rgb(244, 146, 58)",PINK:"rgb(249, 203, 209)",PURPLE:"rgb(148, 31, 177)",RED:"rgb(248, 61, 61)",VIOLET:"rgb(88, 59, 154)",WHITE:"rgb(255, 255, 255)",YELLOW:"rgb(248, 226, 76)"}),q={x:.5,y:.5};g.LEAVE_TEXT=a;g.NULL_STATE_DIMENSIONS=b;g.PHOTO_PREVIEW_DIMENSIONS=c;g.PREVIEW_DIMENSIONS=d;g.SATP_PLACEHOLDER=e;g.SATP_PREVIEW_DIMENSIONS=f;g.STICKER_EDITING_MODE=h;g.STICKER_TYPE=i;g.TEXT_OVERLAY_MODE=j;g.OVERLAY_ALIGNMENT_TYPE=k;g.VIDEO_MAX_DURATION=l;g.VIDEO_MIN_DURATION=m;g.VIDEO_MIN_DURATION_FOR_TRIM=n;g.VIDEO_PREVIEW_DIMENSIONS=o;g.COLOR_NAME_TO_RGB=p;g.ORIGIN=q}),98);
__d("StoryReplyType",[],(function(a,b,c,d,e,f){a=Object.freeze({UNKNOWN:"unknown",TEXT:"text",LIGHT_WEIGHT:"light_weight",MEDIA:"media",STICKER:"sticker",GIF:"gif",PHOTO:"photo",VIDEO:"video",POLL_VOTE:"poll_vote",QUIZ_VOTE:"quiz_vote",SLIDER_VOTE:"slider_vote",REACTION_STICKER_REACT:"reaction_sticker_react",CONTEXTUAL_REPLY:"contextual_reply",AUDIO:"audio",PREDICTION_STICKER_VOTE:"prediction_sticker_vote",AVATAR_LIGHT_WEIGHT:"avatar_light_weight"});f["default"]=a}),66);
__d("useStoriesShowSentTextToast",["fbt","TetraIcon.react","cometPushToast","cr:3460","react","useToasterStateManager"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");function a(a,e){var f=c("useToasterStateManager")(),g=i.jsx(c("TetraIcon.react"),{color:"highlight",icon:b("cr:3460"),size:20}),j=e===!0?h._("__JHASH__UX95e_k-8XA__JHASH__",[h._param("Story's Page's name",a)]):h._("__JHASH__4chvTfnLMSL__JHASH__",[h._param("Story's owner's name",a)]);return function(){d("cometPushToast").cometPushToast({icon:g,message:j},void 0,f)}}g["default"]=a}),98);
__d("useStoriesSendReply",["CometRelay","StoriesActorContext","StoriesGating","StoriesLoggingConstants","StoryReplyType","cometPushToast","react","useMinifiedProductAttribution","useStoriesSendReplyMutation.graphql","useStoriesShowSentTextToast","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useContext,j=e.useMemo,k=function(a,b,d){var e=a.get(b.storyID);e=e&&e.getLinkedRecord("story_card_info");e=e&&e.getLinkedRecord("story_card_reactions",{first:10});if(e==null)return;var f=null,g=null,h=null,i=e.getLinkedRecords("edges");if(i==null||i.length===0){var j=a.create("client:newNode:"+c("uuidv4")(),"MessagingActor");j.setValue(d,"id");j.setValue("User","__typename");d=a.create("client:newNode:"+c("uuidv4")(),"MessengerMontageMessageActionsOfReactionConnection");h=[];d.setLinkedRecords(h,"edges");g=d;var k=a.create("client:newNode:"+c("uuidv4")(),"MessengerMontageMessageReaction");k.setLinkedRecord(j,"messaging_actor");k.setLinkedRecord(d,"messaging_actions");f=k;j=a.create("client:newNode:"+c("uuidv4")(),"StoryCardReactionsEdge");j.setLinkedRecord(k,"node");i=[j];e.setLinkedRecords(i,"edges")}else f=i[0]&&i[0].getLinkedRecord("node"),g=f&&f.getLinkedRecord("messaging_actions"),h=g&&g.getLinkedRecords("edges");if(g==null||h==null||f==null)return;d=a.create("client:newNode:"+c("uuidv4")(),"MessengerMontageMessageAction");d.setValue(b.unicode,"reaction");k=a.create("client:newNode:"+c("uuidv4")(),"MessengerMontageMessageActionsOfReactionEdge");k.setLinkedRecord(d,"node");h.push(k);g.setLinkedRecords(h,"edges");g.setValue(h.length,"count")},l=h!==void 0?h:h=b("useStoriesSendReplyMutation.graphql");function m(a){var b;return(b=Object.keys(c("StoryReplyType")).find(function(b){return c("StoryReplyType")[b]===a}))!=null?b:"UNKNOWN"}function a(a,b){var e=d("CometRelay").useRelayEnvironment(),f=i(c("StoriesActorContext")),g=f.actorID,h=c("useMinifiedProductAttribution")(),n=c("useStoriesShowSentTextToast")(a,b);return j(function(){var a=function(a,b){return d("CometRelay").commitMutation(e,{mutation:l,onCompleted:function(a,d){n(),b.replyAttemptCompletedLog(c("StoryReplyType").GIF,d==null?null:d[0])},onError:function(a){b.replyAttemptCompletedLog(c("StoryReplyType").GIF,a)},variables:{input:{attribution_id_v2:h,gif_url:a.gifUrl,story_id:a.storyID,story_reply_type:m(c("StoryReplyType").GIF)}}})},b=function(a,b){return d("CometRelay").commitMutation(e,{mutation:l,onCompleted:function(a,d){b.replyAttemptCompletedLog(c("StoryReplyType").LIGHT_WEIGHT,d==null?null:d[0])},onError:function(a){b.replyAttemptCompletedLog(c("StoryReplyType").LIGHT_WEIGHT,a)},optimisticUpdater:function(b){return k(b,a,g)},variables:{input:{attribution_id_v2:h,lightweight_reaction_actions:{offsets:[a.timeOffset||0],reaction:a.unicode},message:a.unicode,story_id:a.storyID,story_reply_type:m(c("StoryReplyType").LIGHT_WEIGHT)}}})},f=function(a,b){var f=a.isContextualReply===!0?c("StoryReplyType").CONTEXTUAL_REPLY:c("StoryReplyType").STICKER;return d("CometRelay").commitMutation(e,{mutation:l,onCompleted:function(a,c){n();b.replyAttemptCompletedLog(f,c==null?null:c[0]);a=c==null;d("StoriesGating").isTest()&&a&&d("cometPushToast").cometPushSimpleToast("sticker reply successful")},onError:function(a){b.replyAttemptCompletedLog(f,a)},variables:{input:{attribution_id_v2:h,sticker_id:a.stickerID,story_id:a.storyID,story_reply_type:m(f)}}})},i=function(a,b,f,g){f.replyLog(c("StoriesLoggingConstants").ACTION_TYPE.SEND_REPLY_ATTEMPT);var i=b===!0?c("StoryReplyType").CONTEXTUAL_REPLY:c("StoryReplyType").TEXT;return d("CometRelay").commitMutation(e,{mutation:l,onCompleted:function(b){function a(a,c){return b.apply(this,arguments)}a.toString=function(){return b.toString()};return a}(function(a,b){n();f.replyAttemptCompletedLog(i,b==null?null:b[0]);g&&g(b);a=b==null;d("StoriesGating").isTest()&&a&&d("cometPushToast").cometPushSimpleToast("text reply successful")}),onError:function(a){f.replyAttemptCompletedLog(i,a)},variables:{input:{attribution_id_v2:h,message:a.message,story_id:a.storyID,story_reply_type:m(i)}}})};return{sendGif:a,sendLWR:b,sendSticker:f,sendText:i}},[g,e,h,n])}g["default"]=a}),98);
__d("useStoriesLWR.react",["CometRelay","CometRouteParams","Random","StoriesEnums","StoriesLoggerContext","StoriesLoggingConstants","StoriesPauseReasons","react","useStoriesLWRKeyframes","useStoriesLWR_animations.graphql","useStoriesSendReply"],(function(a,b,c,d,e,f,g){"use strict";var h;e=d("react");var i=e.useCallback,j=e.useContext,k=.55,l=(f={},f["1635855486666999"]=d("StoriesEnums").LIGHTWEIGHT_REACTION_UNICODES.LIKE,f["1678524932434102"]=d("StoriesEnums").LIGHTWEIGHT_REACTION_UNICODES.LOVE,f["115940658764963"]=d("StoriesEnums").LIGHTWEIGHT_REACTION_UNICODES.HAHA,f["478547315650144"]=d("StoriesEnums").LIGHTWEIGHT_REACTION_UNICODES.WOW,f["908563459236466"]=d("StoriesEnums").LIGHTWEIGHT_REACTION_UNICODES.SORRY,f["444813342392137"]=d("StoriesEnums").LIGHTWEIGHT_REACTION_UNICODES.ANGER,f["613557422527858"]=d("StoriesEnums").LIGHTWEIGHT_REACTION_UNICODES.SUPPORT,f),m=h!==void 0?h:h=b("useStoriesLWR_animations.graphql");function a(a){var b=a.animations,e=a.cardID,f=a.isClicked,g=f===void 0?!1:f,h=a.setPause;f=d("CometRelay").useFragment(m,b);a=j(c("StoriesLoggerContext"));var n=a.logger;b=c("useStoriesSendReply")();var o=b.sendLWR,p=d("CometRouteParams").useRouteParams();a=i(function(){g&&h(!0,d("StoriesPauseReasons").LWR_PLAYBACK)},[g,h]);b=i(function(a){g&&a.length===0&&h(!1,d("StoriesPauseReasons").LWR_PLAYBACK)},[g,h]);var q=i(function(){return g?{random:-1,scale:1}:{random:d("Random").random(),scale:1+d("Random").random()*k}},[g]);q=c("useStoriesLWRKeyframes")({initializeVisualAttributes:q,onKeyframesRemoved:b,onKeyframesSelected:a,viewer:f});b=q[0];var r=q[1];a=i(function(a){e!=null&&g&&(o({storyID:e,unicode:l[a]},n),p.source===c("StoriesLoggingConstants").ACTION_SOURCE.FROM_FEED_INLINE_VIEWER&&n.sifAutoplayLwrLog(c("StoriesLoggingConstants").ACTION_SOURCE.FROM_FEED_INLINE_VIEWER)),r(a)},[r,e,g,n,p.source,o]);return[b,a]}g["default"]=a}),98);