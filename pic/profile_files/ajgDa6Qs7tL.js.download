;/*FB_PKG_DELIM*/

__d("CometProfileHeaderTopRow.react",["CometEntityHeaderScrollToContext","CometRow.react","CometRowItem.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useContext,j=b.useEffect,k=b.useRef,l={actorContainer:{alignItems:"xuk3077",alignSelf:"xamitd3",display:"x78zum5",height:"xqtp20y",marginTop:"xw7yly9",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",$$css:!0},rootAlignStart:{alignSelf:"xqcrz7y",$$css:!0}};function a(a){var b=a.actor,d=a.align;d=d===void 0?"center":d;var e=a.banner;a=a.titleBlock;var f=k(null),g=i(c("CometEntityHeaderScrollToContext"));j(function(){g.scrollToTop(f,-32)},[g]);return h.jsxs("div",{className:c("stylex")(l.root,d==="start"&&l.rootAlignStart),children:[h.jsx("div",{className:c("stylex")(l.actorContainer,d==="start"&&l.rootAlignStart),children:h.jsx(c("CometRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:0,children:h.jsx(c("CometRowItem.react"),{ref:f,children:b})})}),h.jsx(c("CometRow.react"),{align:d,children:h.jsx(c("CometRowItem.react"),{children:a})}),e]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("ProfileCometProfilePictureEditDialogReducer",[],(function(a,b,c,d,e,f){"use strict";function a(){return{image:null,isUploading:!1,step:"PICKER"}}function b(a,b){switch(b.type){case"ADD_FRAME":return babelHelpers["extends"]({},a,{step:"FRAME"});case"CREATE_AVATAR":return babelHelpers["extends"]({},a,{step:"AVATAR"});case"SELECT_PHOTO":return babelHelpers["extends"]({},a,{image:b.image,step:"PREVIEW"});case"PREVIEW_CANCEL":return babelHelpers["extends"]({},a,{image:null,step:"PICKER"});case"REMOVE_FAILED":return babelHelpers["extends"]({},a,{isUploading:!1});case"REMOVE_STARTED":return babelHelpers["extends"]({},a,{isUploading:!0});case"REMOVE_SUCCESS":return babelHelpers["extends"]({},a,{isUploading:!1});case"UPLOAD_FAILED":return babelHelpers["extends"]({},a,{isUploading:!1});case"UPLOAD_STARTED":return babelHelpers["extends"]({},a,{isUploading:!0});case"UPLOAD_SUCCESS":return babelHelpers["extends"]({},a,{image:babelHelpers["extends"]({},b.image,{isUploaded:!0}),isUploading:!1,step:a.step==="FRAME"?a.step:"PREVIEW"});case"UPDATE_THUMBNAIL":return babelHelpers["extends"]({},a,{image:b.image,step:"THUMBNAIL"});default:return babelHelpers["extends"]({},a)}}f.getInitialState=a;f.reducer=b}),66);
__d("ProfileCometProfilePictureEditDialogContext",["ProfileCometProfilePictureEditDialogReducer","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({dispatch:c("emptyFunction"),loadAvatarEntryPoint:void 0,loadEntryPoint:void 0,state:d("ProfileCometProfilePictureEditDialogReducer").getInitialState()});g["default"]=b}),98);
__d("XProfilePicUploadAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/picture/upload/",{privacy_mutation_token:{type:"String"},profile_id:{type:"Int",required:!0},photo_source:{type:"Enum",defaultValue:9,enumType:0}})}),null);
__d("useProfileCometPhotoUploader",["AsyncUploadRequest","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(){var a=i(!1),b=i([]);h(function(){return function(){a.current&&b.current&&b.current.forEach(function(a){return a.abort()})}},[]);return function(d,e,f){d=new(c("AsyncUploadRequest"))(d).setAllowCrossOrigin(!0).setFiles({file:e}).setPreventDefaultErrorHandler(!0);var g=f.onFailed,h=f.onSucceeded;h&&d.subscribe("success",function(a,b){a=b.getResponse();if(a==null)throw c("unrecoverableViolation")("Photo upload result should contain a response.","profile_comet");h(a.getPayload())});g&&d.subscribe("failure",function(a,b){a=b.getResponse()||{};b=a.errorDescription;a=a.errorSummary;g({description:b!=null?b.toString():"",summary:a!=null?a.toString():""})});d.subscribe("progress",function(){return a.current=!0});d.send();b.current.push(d)}}g["default"]=a}),98);
__d("ProfileCometProfilePictureMediaUploadAction.react",["Actor","ActorURI","CometFileSelector.react","ProfileCometProfilePictureEditDialogContext","XProfilePicUploadAsyncController","react","useCometAlertDialog","useProfileCometPhotoUploader"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext;function a(a){var b=a.children,e=a.profileID;a=j(c("ProfileCometProfilePictureEditDialogContext"));var f=a.dispatch,g=c("useCometAlertDialog")(),k=c("useProfileCometPhotoUploader")();a=d("Actor").useActor();var l=a[0],m=i(function(a){var b;f({image:{height:(b=a.imageHeight)!=null?b:0,id:a.fbid,isProfilePicture:!1,uri:(b=a.imageURI)!=null?b:"",width:(b=a.imageWidth)!=null?b:0},type:"UPLOAD_SUCCESS"})},[f]),n=i(function(a){f({type:"UPLOAD_FAILED"}),g({body:a.description,title:a.summary})},[f,g]);a=i(function(a){if(!a.length)return;f({type:"UPLOAD_STARTED"});var b=d("ActorURI").create(c("XProfilePicUploadAsyncController").getURIBuilder().setInt("profile_id",e).setEnum("photo_source",57).getURI(),l);k(b,a[0],{onFailed:n,onSucceeded:m})},[f,n,m,e,k,l]);return h.jsx(c("CometFileSelector.react"),{accept:["image/*","image/heif","image/heic"],onFilesSelected:a,children:function(a){return b(a)}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useDiscardConfirmationDialog",["fbt","react","useCometConfirmationDialog"],(function(a,b,c,d,e,f,g,h){"use strict";b=d("react");var i=b.useCallback,j=b.useRef;function a(){var a=j(null),b=c("useCometConfirmationDialog")(),d=i(function(a){b({body:h._("__JHASH__7xmdVbwftTY__JHASH__"),cancel:h._("__JHASH__sX7c9Q3pReC__JHASH__"),confirm:h._("__JHASH__F6L2xtj0CmW__JHASH__"),title:h._("__JHASH__Nw0vNajDZ5c__JHASH__")},a)},[b]);return[d,a]}g["default"]=a}),98);
__d("XProfilePicUploadAsyncControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/profile/picture/upload/",Object.freeze({photo_source:9}),void 0);b=a;g["default"]=b}),98);
__d("useOnRoutableDialogClose",["CometRouteRenderType","react","useCometRouterDispatcher"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(a){a===void 0&&(a="/");var b=d("CometRouteRenderType").useIsPushView(),e=c("useCometRouterDispatcher")(),f=d("CometRouteRenderType").useIsHosted();return h(function(){if(e)if(e.popPushView&&b)return e.popPushView();else if(e.goBack&&f)return e.goBack();else return e.go(a,{target:"self"})},[a,e,f,b])}g["default"]=a}),98);